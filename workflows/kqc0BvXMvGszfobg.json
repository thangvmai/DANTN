{
  "active": false,
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Google Sheets2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out4": {
      "main": [
        [
          {
            "node": "Edit Fields4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields4": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [
          {
            "node": "Edit Fields5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request4": {
      "main": [
        [
          {
            "node": "Basic LLM Chain2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain2": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain2",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Content2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields5": {
      "main": [
        [
          {
            "node": "Aggregate6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate6": {
      "main": [
        [
          {
            "node": "Content2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request5": {
      "main": [
        [
          {
            "node": "Split Out5",
            "type": "main",
            "index": 0
          },
          {
            "node": "Split Out4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "C·∫≠p nh·∫≠t n·ªôi dung2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "l·∫•y n·ªôi dung2": {
      "main": [
        [
          {
            "node": "Code8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets2": {
      "main": [
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Code6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code6": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "HTTP Request5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "C·∫≠p nh·∫≠t n·ªôi dung2": {
      "main": [
        [
          {
            "node": "l·∫•y n·ªôi dung2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Content2": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out5": {
      "main": [
        [
          {
            "node": "check image2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check image2": {
      "main": [
        [
          {
            "node": "Code7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code7": {
      "main": [
        [
          {
            "node": "Aggregate7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate7": {
      "main": [
        [
          {
            "node": "·∫¢nh2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "·∫¢nh2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "·∫¢nh2": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Code8": {
      "main": [
        [
          {
            "node": "Aggregate8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate8": {
      "main": [
        [
          {
            "node": "Telegram2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "·∫¢nh2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-06-10T07:21:22.071Z",
  "id": "kqc0BvXMvGszfobg",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Post_multi_page",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "minutes",
              "minutesInterval": 30
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -2420,
        1080
      ],
      "id": "e9ec9f3e-f1ea-4dc3-b0ba-58ad122cb7b0",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "fieldToSplitOut": "results",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -780,
        580
      ],
      "id": "510eafd1-6b75-4190-8d15-2cf864600baa",
      "name": "Split Out4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e2805947-23bb-42bc-8758-4a78e372b3d7",
              "name": "title",
              "value": "={{ $json.title }}",
              "type": "string"
            },
            {
              "id": "27c45a5e-9a40-497b-a4c3-8ff433669683",
              "name": "url",
              "value": "={{ $json.url }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -580,
        580
      ],
      "id": "8c5d7b25-7b14-4f5a-a1bb-27be05cee929",
      "name": "Edit Fields4"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -340,
        580
      ],
      "id": "a06b3380-9740-4313-88f3-43f23db9981d",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tavily.com/extract",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "urls",
              "value": "={{ $json.url }}"
            },
            {
              "name": "include_images",
              "value": "false"
            },
            {
              "name": "extract_depth",
              "value": "basic"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -120,
        680
      ],
      "id": "445109db-5285-4bff-a1bc-22be4947c95c",
      "name": "HTTP Request4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=- Ti·ªÉu ƒë·ªÅ: {{ $('Loop Over Items2').item.json.title }}\n- raw content: {{ $json.results[0].raw_content }}\n- URL: {{ $('Loop Over Items2').item.json.url }}",
        "messages": {
          "messageValues": [
            {
              "message": "- B·∫°n l√† m·ªôt nh√¢n vi√™n sale c·ªßa m·ªôt spa, chuy√™n ph·ª• tr√°ch vi·∫øt b√†i qu·∫£ng c√°o d·ªãch v·ª• v√† m·ªπ ph·∫©m ƒëƒÉng l√™n facebook\n- ƒë·∫ßu v√†o: ti√™u ƒë·ªÅ, n·ªôi dung th√¥, URL\n- ƒê·ªçc k·ªπ ti√™u ƒë·ªÅ v√† n·ªôi dung th√¥ ƒë∆∞·ª£c cung c·∫•p, t·∫°o m·ªôt t√≥m t·∫Øt ng·∫Øn g·ªçn, n√™u r√µ ƒëi·ªÉm ch√≠nh, nh·ªØng th√¥ng tin quan tr·ªçng v√† b·∫•t c·ª© th√¥ng tin n√†o li√™n quan ƒë·∫øn d·ªãch v·ª• v√† m·ªπ ph·∫©m chƒÉm s√≥c da.\n- ƒê·∫£m b·∫£o t√≥m t·∫Øt r√µ r√†ng, th√¥ng tin ph√π h·ª£p v·ªõi ƒë·ªôc gi·∫£ ƒëang t√¨m ki·∫øm th√¥ng tin nhanh v·ªÅ d·ªãch v·ª• bao g·ªìm nh·ªØng l·ª£i √≠ch d·ªãch v·ª• mang l·∫°i v√† nh·ªØng ƒë·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t c·ªßa d·ªãch v·ª• v√† s·∫£n ph·∫©m ƒë√≥.\n- cung c·∫•p t√≥m t·∫Øt theo ƒë·ªãnh d·∫°ng c√≥ c·∫•u tr√∫c, s·ª≠ d·ª•ng d·∫•u ƒë·∫ßu d√≤ng ho·∫∑c ƒëo·∫°n vƒÉn ng·∫Øn ƒë·ªÉ r√µ r√†ng.\n- ƒë·ªãnh d·∫°ng ƒë·∫ßu ra:\n+ m·ªôt t√≥m t·∫Øt r√µ r√†ng v√† ng·∫Øn g·ªçn v·ªÅ th√¥ng tin s·∫£n ph·∫©m\n+ bao g·ªìm tham chi·∫øu ƒë·∫øn ti√™u ƒë·ªÅ v√† url ƒë·ªÉ c√≥ ng·ªØ c·∫£nh\n+ ƒë·ªãnh d·∫°ng plain text kh√¥ng ch·ª©a c√°c k√Ω t·ª± markdown nh∆∞ *, ** ho·∫∑c #.v.v.. "
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.6,
      "position": [
        100,
        680
      ],
      "id": "db6da115-f730-4602-b527-27257a095eef",
      "name": "Basic LLM Chain2"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        220,
        880
      ],
      "id": "31994391-e7b7-4d77-b300-b9a9ff72a83a",
      "name": "Google Gemini Chat Model4",
      "credentials": {
        "googlePalmApi": {
          "id": "rnsTp7QFPOBNsMfi",
          "name": "genmini"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b6ab2317-a5cc-4e84-b8b5-0f3ab43308e9",
              "name": "all",
              "value": "={{ $itemindex+1 }}. {{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -120,
        500
      ],
      "id": "e363a8ce-58d6-404d-81ca-7c4ace48208f",
      "name": "Edit Fields5"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "all"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        100,
        500
      ],
      "id": "86f680c3-c29a-4be1-850d-c42a28abf629",
      "name": "Aggregate6"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tavily.com/search",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"query\": \"{{ $json['ch·ªß ƒë·ªÅ'] }}\",\n  \"topic\": \"general\",\n  \"search_depth\": \"basic\",\n  \"chunks_per_source\": 3,\n  \"max_results\": 5,\n  \"time_range\": null,\n  \"days\": 7,\n  \"include_answer\": false,\n  \"include_raw_content\": false,\n  \"include_images\": true,\n  \"include_image_descriptions\": false,\n  \"include_domains\": [],\n  \"exclude_domains\": []\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1180,
        1080
      ],
      "id": "1c2b7873-bf7d-47c6-819a-bf3cc0c653b1",
      "name": "HTTP Request5"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        820,
        1000
      ],
      "id": "be3514a9-acba-4b0a-8cc5-ae0ff563b28d",
      "name": "Merge2"
    },
    {
      "parameters": {
        "chatId": "5234389296",
        "text": "=Bot ƒë√£ t·∫°o b√†i vi·∫øt ch·ªß ƒë·ªÅ: {{ $('l·∫•y n·ªôi dung2').item.json['ch·ªß ƒë·ªÅ'] }} \n{{ $('l·∫•y n·ªôi dung2').item.json['ng√†y t·∫°o'] }}\n\n{{ $('l·∫•y n·ªôi dung2').item.json['N·ªôi dung'] }}\n·∫¢nh 1: {{ $json['·∫¢nh'][0] }}\n\n·∫¢nh 2: {{ $json['·∫¢nh'][1] }}\n\n·∫¢nh 3: {{ $json['·∫¢nh'][2] }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "·∫¢nh 1",
                    "additionalFields": {
                      "callback_data": "nhatrang a1"
                    }
                  },
                  {
                    "text": "·∫¢nh 2",
                    "additionalFields": {
                      "callback_data": "nhatrang a2"
                    }
                  },
                  {
                    "text": "·∫¢nh 3",
                    "additionalFields": {
                      "callback_data": "nhatrang a3"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "H·ªßy",
                    "additionalFields": {
                      "callback_data": "nhatrang k"
                    }
                  },
                  {
                    "text": "All image",
                    "additionalFields": {
                      "callback_data": "nhatrang all"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1840,
        1000
      ],
      "id": "26d9d1e7-ce5e-48a6-a4ae-4848e6a32532",
      "name": "Telegram2",
      "webhookId": "c8c122c8-b1e5-49be-a9a3-b252c8cd03e4",
      "credentials": {
        "telegramApi": {
          "id": "4zmVQGSfe7yJMzrf",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id",
              "lookupValue": "={{ $json['id'] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1280,
        1000
      ],
      "id": "0af2d1f3-78d2-4294-861c-e8f6b1078739",
      "name": "l·∫•y n·ªôi dung2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "pa5vfp4JCvBwoubs",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -2140,
        1080
      ],
      "id": "670aa38a-5ff4-45df-89db-5b2983b7ea53",
      "name": "Google Sheets2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "pa5vfp4JCvBwoubs",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7423bdcc-459b-4207-9e24-bf4ac4f83078",
              "leftValue": "={{ $json['tr·∫°ng th√°i'] }}",
              "rightValue": "ƒê√£ ƒëƒÉng",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1960,
        1080
      ],
      "id": "44772cd6-ad40-4a59-bbb0-915a05f22f17",
      "name": "If4"
    },
    {
      "parameters": {
        "jsCode": "let items = $input.all();\nlet minItem = items[0];\n\nfor (const item of items) {\n  if (item.json.id < minItem.json.id) {\n    minItem = item;\n  }\n}\n\nreturn [minItem];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1760,
        1080
      ],
      "id": "5d8f7566-9aa4-464c-badb-1e036bb86dc1",
      "name": "Code6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "0f1aad73-2557-4470-9375-a9f3f3b46a09",
              "leftValue": "={{ $json['N·ªôi dung'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1540,
        1080
      ],
      "id": "ef06fe23-fd11-45b6-a465-becb2e8de81a",
      "name": "If5"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Code6').item.json.id }}",
            "·∫¢nh": "={{ $json.output.src1 }} \n{{ $json.output.src2 }}\n{{ $json.output.src3 }}",
            "N·ªôi dung": "={{ $('Content2').item.json.output }}",
            "ng√†y t·∫°o": "={{ DateTime.now().setZone(\"Asia/Ho_Chi_Minh\").toFormat(\"yyyy-MM-dd HH:mm\") }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ch·ªß ƒë·ªÅ",
              "displayName": "ch·ªß ƒë·ªÅ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "tr·∫°ng th√°i",
              "displayName": "tr·∫°ng th√°i",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ng√†y ƒëƒÉng",
              "displayName": "ng√†y ƒëƒÉng",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Link b√†i vi·∫øt",
              "displayName": "Link b√†i vi·∫øt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "N·ªôi dung",
              "displayName": "N·ªôi dung",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "·∫¢nh",
              "displayName": "·∫¢nh",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ng√†y t·∫°o",
              "displayName": "ng√†y t·∫°o",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "X√°c nh·∫≠n",
              "displayName": "X√°c nh·∫≠n",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1060,
        1000
      ],
      "id": "d0ff9909-3da5-46c8-8bba-bdf7e7bb4eac",
      "name": "C·∫≠p nh·∫≠t n·ªôi dung2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "pa5vfp4JCvBwoubs",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.all }}",
        "options": {
          "systemMessage": "=## NHI·ªÜM V·ª§:\nVi·∫øt b√†i qu·∫£ng c√°o Facebook s√°ng t·∫°o cho d·ªãch v·ª• v√† s·∫£n ph·∫©m chƒÉm s√≥c da theo ch·ªß ƒë·ªÅ {{ $('Code6').item.json['ch·ªß ƒë·ªÅ'] }}.\n\n## B∆Ø·ªöC 1: T·ªîNG H·ª¢P TH√îNG TIN\nT·ª´ 5 ƒëo·∫°n t√≥m t·∫Øt c·ªßa c√°c b√†i vi·∫øt Google li√™n quan ƒë·∫øn ch·ªß ƒë·ªÅ chƒÉm s√≥c da {{ $('Code6').item.json['ch·ªß ƒë·ªÅ'] }}, h√£y:\n\nR√∫t ra nh·ªØng ƒëi·ªÉm n·ªïi b·∫≠t v√† thuy·∫øt ph·ª•c nh·∫•t v·ªÅ:\n\nL·ª£i √≠ch n·ªïi b·∫≠t c·ªßa li·ªáu tr√¨nh/skincare\n\nC·∫£m nh·∫≠n th·ª±c t·∫ø c·ªßa kh√°ch h√†ng (review, feedback)\n\nTr·∫£i nghi·ªám th∆∞ gi√£n, kh√¥ng gian spa, c√¥ng ngh·ªá s·ª≠ d·ª•ng\n\nHi·ªáu qu·∫£ c·∫£i thi·ªán da (tr∆∞·ªõc/sau), th·ªùi gian ph·ª•c h·ªìi\n\nTh√†nh ph·∫ßn t·ª± nhi√™n, d∆∞·ª£c m·ªπ ph·∫©m cao c·∫•p n·∫øu c√≥\n\nT·∫≠p trung v√†o c√°c y·∫øu t·ªë t·∫°o c·∫£m x√∫c & k√≠ch th√≠ch h√†nh ƒë·ªông:\n\nTh∆∞ gi√£n ‚Äì l√†m ƒë·∫πp ‚Äì t√°i t·∫°o nƒÉng l∆∞·ª£ng\n\nT·ª± th∆∞·ªüng ‚Äì chƒÉm s√≥c b·∫£n th√¢n ‚Äì n√¢ng t·∫ßm v·∫ª ƒë·∫πp\n\nXu h∆∞·ªõng l√†m ƒë·∫πp l√†nh t√≠nh ‚Äì t·ª± nhi√™n ‚Äì kh√¥ng x√¢m l·∫•n\n\n## B∆Ø·ªöC 2: VI·∫æT B√ÄI QU·∫¢NG C√ÅO FACEBOOK\nD·ª±a tr√™n n·ªôi dung t·ªïng h·ª£p t·ª´ b∆∞·ªõc 1, h√£y vi·∫øt m·ªôt b√†i qu·∫£ng c√°o h·∫•p d·∫´n v·ªõi:\n\n## B·ªë c·ª•c r√µ r√†ng:\nM·ªü ƒë·∫ßu g√¢y ch√∫ √Ω\nG·ª£i c·∫£m x√∫c, nh·∫•n m·∫°nh v·∫•n ƒë·ªÅ m√† kh√°ch h√†ng ƒëang g·∫∑p ph·∫£i (da x·ªân m√†u, m·ª•n, stress‚Ä¶), ho·∫∑c ƒë∆∞a ra l·ªùi m·ªùi h·∫•p d·∫´n.\n\nN·ªôi dung ch√≠nh\nN√™u b·∫≠t gi√° tr·ªã v√† tr·∫£i nghi·ªám ƒë·ªôc quy·ªÅn c·ªßa d·ªãch v·ª•/s·∫£n ph·∫©m:\n\nT·∫°i sao n√™n ch·ªçn spa n√†y?\n\nLi·ªáu tr√¨nh c√≥ g√¨ ƒë·∫∑c bi·ªát?\n\nFeedback kh√°ch h√†ng?\n\nTr∆∞·ªõc/sau r√µ r·ªát?\n\nK·∫øt th√∫c b·∫±ng l·ªùi k√™u g·ªçi h√†nh ƒë·ªông m·∫°nh m·∫Ω\nV√≠ d·ª•:\nüëâ ‚Äúƒê·∫∑t l·ªãch ngay ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i 50%!‚Äù\nüëâ ‚ÄúInbox ngay ‚Äì s·ªë l∆∞·ª£ng su·∫•t ∆∞u ƒë√£i c√≥ h·∫°n!‚Äù\nüëâ ‚ÄúT·ª± tin v·ªõi l√†n da ƒë·∫πp ‚Äì ch·ªâ sau 1 l·∫ßn tr·∫£i nghi·ªám!‚Äù\n\nüí° PHONG C√ÅCH:\nG·∫ßn g≈©i, ng√¥n ng·ªØ t·ª± nhi√™n nh∆∞ ƒëang tr√≤ chuy·ªán\n\nCh√®n emoji ƒë·ªÉ tƒÉng t√≠nh thu h√∫t (v√≠ d·ª•: üíÜ‚Äç‚ôÄÔ∏è‚ú®üåøüî•üíñ)\n\nNg·∫Øt d√≤ng h·ª£p l√Ω, m·ªói ƒëo·∫°n ng·∫Øn 1‚Äì2 c√¢u\n\nTr√°nh vi·∫øt qu√° d√†i, ∆∞u ti√™n d·ªÖ hi·ªÉu v√† cu·ªën h√∫t\n\nƒêo·∫°n li√™n h·ªá b·∫Øt bu·ªôc (ch√®n v√†o cu·ªëi b√†i vi·∫øt):\n- s·ªë ƒëi·ªán tho·∫°i: 0327191802.\n- ƒë·ªãa ch·ªâ: 80 VƒÉn Cao, Tp Bu√¥n Ma Thu·ªôt, Daklak.\n- Tiktok: Calla de beauty.\n\nTh√™m t·ªëi ƒëa 3 hashtag ph√π h·ª£p cu·ªëi b√†i.\n\n- output:\n\nM·ªôt b√†i ƒëƒÉng Facebook ho√†n ch·ªânh c√≥ b·ªë c·ª•c r√µ r√†ng (t·ªëi ƒëa 200 t·ª´).\n\nƒë·ªãnh d·∫°ng plain text kh√¥ng ch·ª©a c√°c k√Ω t·ª± markdown nh∆∞ *, ** ho·∫∑c #.v.v.."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        460,
        500
      ],
      "id": "c86c5591-f834-402f-9026-ecf792a0c803",
      "name": "Content2"
    },
    {
      "parameters": {
        "fieldToSplitOut": "images",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -700,
        1080
      ],
      "id": "acba74af-19dc-4499-b19d-822b44d3742c",
      "name": "Split Out5"
    },
    {
      "parameters": {
        "url": "={{ $json.images }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -520,
        1080
      ],
      "id": "5651d7ef-97bc-4919-b6e3-8ebd1700aab4",
      "name": "check image2",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "// L·∫•y to√†n b·ªô URL ·∫£nh h·ª£p l·ªá\nconst validImageUrls = items\n  .map(item => item.json?.images)\n  .filter(url => typeof url === 'string' && url.startsWith('http'));\n\n// T·∫°o danh s√°ch d·∫°ng chu·ªói\nconst imageListString = validImageUrls\n  .map((url, i) => `${i + 1}. ${url}`)\n  .join('\\n');\n\n// G·∫Øn l·∫°i m·ªói item c≈© v·ªõi th√™m context imageListString\nreturn items.map(item => {\n  return {\n    json: {\n      ...item.json,\n      imageListString,\n      allValidImages: validImageUrls\n    }\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -300,
        1080
      ],
      "id": "6a48ab9f-6843-45fd-b38f-efba4d372acd",
      "name": "Code7"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "allValidImages"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -80,
        1080
      ],
      "id": "ae216f0d-cc6e-4b9d-9811-7a23752e28d8",
      "name": "Aggregate7"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"title\": \"title\",\n  \"src1\": \"link\",\n  \"src2\": \"\",\n  \"src3\": \"\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        460,
        1300
      ],
      "id": "c4e99cd7-e2cc-4fb4-a674-8f216e1b06e5",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=- H√¨nh ·∫£nh: {{ $json.allValidImages[0] }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=- B·∫°n l√† 1 Photographer, h√£y ki·ªÉm tr·∫£ t·∫•t c·∫£ h√¨nh ·∫£nh:  \n+ - Ch·ªçn ra 3, 2 b·ª©c ·∫£nh ph√π h·ª£p v·ªõi ti√™u ƒë·ªÅ : {{ $('HTTP Request5').item.json.query }} nh·∫•t\n+ b·ªè qua t·∫•t c·∫£ ·∫£nh c√≥ logo ho·∫∑c ch·ªØ tr√™n ·∫£nh \n+ b·ªè qua nh·ªØng url Source image is unreachable"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        220,
        1080
      ],
      "id": "3f99d51b-4b0e-41b4-a59b-b20564fdea98",
      "name": "·∫¢nh2"
    },
    {
      "parameters": {
        "jsCode": "return items.flatMap(item => {\nconst urls = item.json[\"·∫¢nh\"].split('\\n');\n\nreturn urls.map(url => ({\njson: {\n\"·∫¢nh\": url.trim()\n}\n}));\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1460,
        1000
      ],
      "id": "f381a5cf-3cc6-4389-8b0a-de7ff4263f2a",
      "name": "Code8"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "·∫¢nh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1640,
        1000
      ],
      "id": "c7ec7556-116f-413e-bad7-5001889370aa",
      "name": "Aggregate8"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        160,
        1300
      ],
      "id": "79b758b1-2fee-4611-be8e-dfa41cf804dc",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "DLXZUn8UgwJimSMz",
          "name": "OpenAi account"
        }
      }
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": []
    }
  },
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-06-25T11:46:11.336Z",
  "versionId": "830f8bd9-4a95-4754-9df0-efe8ad82510d"
}